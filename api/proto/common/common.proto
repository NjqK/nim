syntax = "proto3";
package common.common;

option java_multiple_files = false;
option java_package = "com.example.proto.common.common";
option java_outer_classname = "Common";

enum MsgType {
    // NULL
    MSG_TYPE_NUL = 0;
    // æ¡æ‰‹
    HAND_SHAKE = 1;
    // å¿ƒè·³
    HEART_BEAT = 2;
    // æŠ¢å çº¿
    KICK = 3;
    // å•èŠ
    SINGLE_CHAT = 4;
    // ç¾¤èŠ
    MULTI_CHAT = 5;
    // æŒ¥æ‰‹
    BYE = 6;
}

enum MsgContentType {
    MSG_CONTENT_NUL = 0;
    // æ–‡æœ¬æ¶ˆæ¯
    TEXT = 1;
}

enum ReadStatus {
    // æœªè¯»
    UNREAD = 0;
    // å·²è¯»
    READ = 1;
}

message Msg {
    // æ¶ˆæ¯å¤´
    Head head = 1;
    // æ¶ˆæ¯ä½“
    Body body = 2;
}

message Body {
    string content = 1;
}

message ExtraHeader {
    string key = 1;
    string value = 2;
}

message Head {
    // æ¶ˆæ¯id
    int64 msg_id = 1;
    // æ¶ˆæ¯ç±»å‹
    MsgType msg_type = 2;
    // æ¶ˆæ¯å†…å®¹ç±»å‹
    MsgContentType msg_content_type = 3;
    // æ¶ˆæ¯å‘é€è€…id
    int64 from_id = 4;
    // æ¶ˆæ¯æ¥æ”¶è€…id
    int64 to_id = 5;
    // æ¶ˆæ¯æ—¶é—´æˆ³
    int64 timestamp = 6;
    // çŠ¶æ€æŠ¥å‘Š
    int32 status_report = 7;
    // æ‰©å±•å­—æ®µ
    repeated ExtraHeader extends = 8;
}

// é”™è¯¯ç 
enum ErrCode {
    ERRORCODE_NULL = 0;
    // æˆåŠŸ
    SUCCESS = 1;
    // å¤±è´¥
    FAIL = -1;
    // å•å‘ç”¨æˆ·ğŸ†”idç©º
    SEND_MSG_INDIVIDUALLY_TO_UID_NUL = 101;
    // å•å‘æ¶ˆæ¯idç©º
    SEND_MSG_INDIVIDUALLY_MSG_NUL = 102;
    // å‘é€è€…idç©º
    SEND_MSG_INDIVIDUALLY_FROM_ID_NUL = 103;
    // ç¾¤å‘ç”¨æˆ·ğŸ†”idç©º
    SEND_MSG_GROUP_TO_UID_NUL = 104;
    // ç¾¤å‘ç”¨æ¶ˆæ¯idç©º
    SEND_MSG_GROUP_MSG_NUL = 105;
    // å‘é€è€…idç©º
    SEND_MSG_GROUP_FROM_ID_NUL = 106;
    // è·å–æœªè¯»æ¶ˆæ¯ç”¨æˆ·idç©º
    GET_UNREAD_MSG_USER_ID_NUL = 111;
    // ç¡®è®¤æ¶ˆæ¯uidç©º
    ACK_MSG_RESP_UID_NUL = 121;
    // ç¡®è®¤æ¶ˆæ¯guidç©º
    ACK_MSG_RESP_GUID_NUL = 122;
    // æ›´æ–°æ•°æ®åº“å¤±è´¥
    ACK_MSG_RESP_UPDATE_DB_FAIL = 123;
}

message ErrorMsg {
    // é”™è¯¯ç 
    ErrCode error_code = 1;
    // é”™è¯¯ä¿¡æ¯
    string msg = 2;
}

message A {
    string a = 1;
    string b = 2;
}

message B {
    repeated A aList = 1;
}

message C {
    A aList = 1;
}