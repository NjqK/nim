syntax = "proto3";
package common.common;

option java_multiple_files = false;
option java_package = "com.example.proto.common.common";
option java_outer_classname = "Common";

enum MsgType {
    // NULL
    MSG_TYPE_NUL = 0;
    // æ¡æ‰‹
    HAND_SHAKE = 1;
    // å¿ƒè·³
    HEART_BEAT = 2;
    // æŠ¢å çº¿
    KICK = 3;
    // å•èŠ
    SINGLE_CHAT = 4;
    // æŒ¥æ‰‹
    BYE = 5;
}

enum MsgContentType {
    MSG_CONTENT_NUL = 0;
    // æ–‡æœ¬æ¶ˆæ¯
    TEXT = 1;
}

enum ReadStatus {
    // æœªè¯»
    UNREAD = 0;
    // å·²è¯»
    READ = 1;
}

message Msg {
    // æ¶ˆæ¯å¤´
    Head head = 1;
    // æ¶ˆæ¯ä½“
    Body body = 2;
}

message Body {
    string content = 1;
}

message ExtraHeader {
    string key = 1;
    string value = 2;
}

message Head {
    // æ¶ˆæ¯id
    int64 msg_id = 1;
    // æ¶ˆæ¯ç±»å‹
    MsgType msg_type = 2;
    // æ¶ˆæ¯å†…å®¹ç±»å‹
    MsgContentType msg_content_type = 3;
    // æ¶ˆæ¯å‘é€è€…id
    int64 from_id = 4;
    // æ¶ˆæ¯æ¥æ”¶è€…id
    int64 to_id = 5;
    // æ¶ˆæ¯æ—¶é—´æˆ³
    int64 timestamp = 6;
    // çŠ¶æ€æŠ¥å‘Š
    int32 status_report = 7;
    // æ‰©å±•å­—æ®µï¼Œä»¥key/valueå½¢å¼å­˜æ”¾çš„json
    repeated ExtraHeader extends = 8;
}

// é”™è¯¯ç 
enum ErrCode {
    ERRORCODE_NULL = 0;
    // æˆåŠŸ
    SUCCESS = 1;
    // å¤±è´¥
    FAIL = -1;
    // å•å‘ç”¨æˆ·ğŸ†”idç©º
    SEND_MSG_INDIVIDUALLY_TO_UID_NUL = 101;
    // å•å‘ç”¨æˆ·ğŸ†”idç©º
    SEND_MSG_INDIVIDUALLY_MSG_NUL = 102;
    // å‘é€è€…idç©º
    SEND_MSG_INDIVIDUALLY_FROM_ID_NUL = 103;
    // è·å–æœªè¯»æ¶ˆæ¯ç”¨æˆ·idç©º
    GET_UNREAD_MSG_USER_ID_NUL = 150;
}

message ErrorMsg {
    // é”™è¯¯ç 
    ErrCode error_code = 1;
    // é”™è¯¯ä¿¡æ¯
    string msg = 2;
}